<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Filtro FIR en Punto Fijo: Filtro FIR en Punto Fijo</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="utn_small.png"/></td>
  <td id="projectalign">
   <div id="projectname">Filtro FIR en Punto Fijo<span id="projectnumber">&#160;Esteban Bustamante</span>
   </div>
   <div id="projectbrief">Trabajo desarrollado como trabajo final de la materia Técnicas Digitales III</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Buscar',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('index.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Cargando...</div>
<div class="SRStatus" id="Searching">Buscando...</div>
<div class="SRStatus" id="NoMatches">Nada coincide</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Filtro FIR en Punto Fijo </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1 class="doxsection"><a class="anchor" id="intro"></a>
Introducción</h1>
<p>Este proyecto se presenta como parte práctica del trabajo final de la asignatura <b>Técnicas Digitales III</b>. Consiste en la implementación de un Filtro FIR (Finite Impulse Response) definido completamente en software, desarrollado en lenguaje C y orientado a sistemas digitales.</p>
<p>El filtro opera sobre muestras de entrada representadas en formato de punto fijo, haciendo uso de la librería FXP. Para garantizar el correcto sincronismo entre las muestras de entrada y el proceso de filtrado, se emplea un buffer de entrada que permite el procesamiento por bloques de muestras en paralelo.</p>
<p>Tanto la señal de entrada como la señal de salida del filtro se almacenan en archivos de datos en formato PCM (.pcm). Este formato simplifica el procesamiento posterior de los datos y garantiza compatibilidad con herramientas externas para la visualización y el análisis de señales.</p>
<p>Con el objetivo de facilitar su uso y análisis, el proyecto incluye una interfaz gráfica desarrollada en Python, que permite generar señales de prueba, ejecutar el filtro y visualizar gráficamente tanto la entrada como la salida. Asimismo, el filtro puede ser ejecutado directamente desde línea de comandos mediante una interfaz CLI.</p>
<p>Junto al binario se entrega una demostración lista para ser ejecutada tanto en modo gráfico como en modo línea de comandos (ver <a class="el" href="#demo">Demostración</a>).</p>
<h1 class="doxsection"><a class="anchor" id="architecture"></a>
Arquitectura del sistema</h1>
<p>El sistema se encuentra dividido en los siguientes bloques principales:</p>
<ul>
<li><b>Generador de señales</b>: encargado de generar señales de prueba (por ejemplo, tonos senoidales) y almacenarlas en formato PCM.</li>
<li><b>Filtro FIR</b>: núcleo del sistema, implementado en C, que realiza el filtrado en punto fijo utilizando coeficientes configurables.</li>
<li><b>Interfaz gráfica (GUI)</b>: desarrollada en Python, permite configurar parámetros, ejecutar el filtro y visualizar resultados.</li>
<li><b>Interfaz de línea de comandos (CLI)</b>: permite ejecutar el filtro de forma directa, facilitando su integración en scripts y pruebas automatizadas.</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="features"></a>
Características</h1>
<ul>
<li>Implementación de un filtro FIR en software.</li>
<li>Uso de aritmética de punto fijo mediante la librería FXP.</li>
<li>Configuración del número de bits fraccionales.</li>
<li>Procesamiento de múltiples muestras en paralelo.</li>
<li>Coeficientes de filtro configurables externamente.</li>
<li>Entrada y salida en formato PCM de 32 bits.</li>
<li>Visualización gráfica de:<ul>
<li>señal de entrada</li>
<li>señal de salida</li>
<li>coeficientes del filtro</li>
</ul>
</li>
<li>Soporte para ejecución en modo GUI y modo CLI.</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="usage"></a>
Uso del filtro</h1>
<p>El filtro puede utilizarse de dos maneras:</p>
<ul>
<li>Mediante una interfaz gráfica (GUI), pensada para demostraciones y análisis visual.</li>
<li>Mediante una interfaz de línea de comandos (CLI), orientada a pruebas rápidas o automatización.</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="demo"></a>
Demostración</h1>
<p>Para la demostración de la funcionalidad el filtro en C, se generó un filtro haciendo uso de <a href="https://fiiir.com">FIIR</a>, que permite generar coeficientes para filtros arbitrarios con frecuencias de muestreo y filtrado determinadas. Para esta demostración se generó un FIR cuya respuesta al impulso coincide con un seno cardinal (sinc), con una frecuencia de muestreo de 48kHz, una frecuencia de cutoff de 2850Hz y un ancho de banda de transición de 4320Hz, el cual observando su respuesta en frecuencia, tenemos que genera una atenuación de 3dB a 0.1 frecuencia relativa a la de Nyquist, es decir (Fs/2 = 24kHz). </p><div class="image">
<img src="demo_response_freq.png" alt=""/>
<div class="caption">
Respuesta en frecuencia del filtro demostración</div></div>
<h2 class="doxsection"><a class="anchor" id="demo_gui"></a>
Demostración en modo gráfico (GUI)</h2>
<p>Para ejecutar la demostración en modo gráfico, será necesario descargar en primer lugar la última <a href="https://github.com/esbon125/td3-proyecto-final/releases">release</a>, y luego utilizar los siguientes comandos para ejecutar el script con la interfaz gráfica:</p>
<div class="fragment"><div class="line">cd code/src &amp;&amp; make</div>
<div class="line">cd ../utils/scripts</div>
<div class="line">./fir_filter_utn -gui</div>
</div><!-- fragment --><p>Desde la interfaz gráfica es posible:</p><ul>
<li>Generar señales de entrada con uno o más tonos.</li>
<li>Configurar la frecuencia de muestreo y amplitudes.</li>
<li>Cargar un archivo de coeficientes del filtro.</li>
<li>Ejecutar el filtro FIR.</li>
<li>Visualizar gráficamente la señal de entrada, la salida filtrada y los coeficientes del filtro.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="demo_cli"></a>
Demostración en modo línea de comandos (CLI)</h2>
<p>El filtro también puede ejecutarse directamente desde la línea de comandos. Para esto deberán tener los archivos coeficientes.pcm e input.pcm que se incluyen con el programa, incluídos en el link de las releases. Es necesario ubicar estos archivos dentro de la carpeta td3-proyecto-final-1.6.0 que se extrae del zip descargado. Luego ejecutando estos comandos podríamos correr el programa.</p>
<div class="fragment"><div class="line">cp coeficientes.pcm input.pcm ../utils/scripts/</div>
<div class="line">cd code/src &amp;&amp; make</div>
<div class="line">cd ../utils/scripts</div>
<div class="line">./fir_filter -fc=coeficientes.pcm -NB-FRAC=31 --samples=80 input.pcm</div>
</div><!-- fragment --><p>donde:</p><ul>
<li><b>coeficientes.pcm</b> es el archivo que contiene los coeficientes del filtro (en formato float, uno por línea).</li>
<li><b>NB-FRAC</b> indica el número de bits fraccionales utilizados.</li>
<li><b>samples</b> define la cantidad de muestras procesadas en paralelo.</li>
<li><b>input.pcm</b> es el archivo PCM de entrada.</li>
</ul>
<p>El archivo de salida se genera automáticamente en formato PCM y puede ser posteriormente visualizado o procesado con herramientas externas.</p>
<h1 class="doxsection"><a class="anchor" id="todo"></a>
Posibles mejoras</h1>
<p>Si bien por el alcance de este proyecto puede considerarse terminado, estas son algunas mejoras interesantes que pueden interesarle al desarrollador:</p><ul>
<li>Hacer una interfaz común a distintos periféricos para permitir distintas entradas.</li>
<li>Optimizar el filtro haciendo uso de threads en paralelo, lo que implicaría un mecanismo de sincronización.</li>
<li>Hacer uso de la librería libusb para permitir el procesamiento de datos en tiempo real, además haciendo uso de la interfaz anteriormente mencionada. </li>
</ul>
<h1 class="doxsection"><a class="anchor" id="references"></a>
Referencias</h1>
<ul>
<li>Librería FXP: <dl class="section see"><dt>Ver también</dt><dd><a href="https://github.com/rsaavedraf/fxp">https://github.com/rsaavedraf/fxp</a></dd></dl>
</li>
<li>Conceptos de filtros FIR: <dl class="section see"><dt>Ver también</dt><dd><a href="https://en.wikipedia.org/wiki/Finite_impulse_response">https://en.wikipedia.org/wiki/Finite_impulse_response</a> </dd></dl>
</li>
</ul>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generado por <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
